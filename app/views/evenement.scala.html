@import helper._ 
@import helper.twitterBootstrap._



@main(Messages("playauthenticate.event.title"),"event") {
<link rel="stylesheet" media="screen" href="@routes.Assets.at("css/google-maps.css")" />
  <script src="http://maps.googleapis.com/maps/api/js?sensor=false&language=en"></script>
  
  <script src="@routes.Assets.at("js/lib/angular.js")"></script>
  <script src="@routes.Assets.at("js/lib/angular-google-maps-2.js")"></script>
  <script src="@routes.Assets.at("js/app/modules/markerModule.js")"></script>
  <script src="@routes.Assets.at("js/app/event/app.js")"></script>
  <script src="@routes.Assets.at("js/app/event/controller.js")"></script>
  <script src="@routes.Assets.at("js/app/filters.js")"></script>
	<div class="row">
		<div class="span6">
			<h1>@Messages("playauthenticate.event.title")</h1>
		</div>
	</div>
	<div class="row" ng-controller="EventCtrl" ng-app="covoiturage">
		<div class="span6">
				<google-map center="center" fit="true" draggable="true" zoom="zoom" markers="markers" mark-click="true" style="height: 400px" class="angular-google-map" refresh="true"></google-map>
		</div>
		<div class="span4">
			<br/>
			<h2>
			{{event.name}}
			</h2>
			<p class="text-center">{{event.description}}</p>
			<address>
			  {{event.address.description}}
			</address>
			<br/>
			
			<div>
				<h3>Moi</h3>
				<p>{{currentSubscriber.name}}</p>
				<address>
				  {{currentSubscriber.address.description}}
				</address>				
				<p>
				{{currentSubscriber.car}}
				</p>
				<br/>
				<span>Je cherche une voiture</span>
				<input type="checkbox" ng:model="filterUsers" ng-true-value="CAR" ng-false-value=""/>
				<br/>								
				<span>Je cherche un passager</span>
				<input type="checkbox" ng:model="filterUsers"  ng-true-value="AUTOSTOP" ng-false-value=""/>
				<br/>
			    	<table id="searchTextResults" class="table">
			      	   <tr><th>Nom</th><th>Prenom</th><th>Adresse</th><th>Type</th></tr>
				      	<tr ng-repeat="subscriber in subscribers | auto:filterUsers:markers " ng-show="!subscriber.current">
						<td>{{subscriber.name}}</td>
						<td>{{subscriber.surname}}</td>
						<td>{{subscriber.address.description}}</td>
						<td><img src="{{subscriber.picto}}" /></td>
						<td>{{subscriber.passengers.length}}</td>
						<td>{{subscriber.car}}</td>
					<td><button class="btn btn-success" type="button" ng-click="addPassengers(subscriber)" >Ajouter</button></td>
					<td><button class="btn btn-warning" type="button" ng-click="removePassengers(subscriber)" >Quitter</button></td>
				   </tr>
				</table>
			</div>
		</div>
	</div>

}
