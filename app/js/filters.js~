'use strict';

/* Filters */

angular.module('covoiturageFilter', []).filter('auto', function() {
  return function(subscribers, filter, markers) {
    	if(filter){
		var result = new Array();				
		for(var i=0;i<subscribers.length;i++){
			var subscriber = subscribers[i];
			var type = subscriber.type;
			if(type === filter){
				result.push(subscriber);
			}
		}
		for(var i=0;i<markers.length;i++){
			var marker = markers[i];
			if(!(marker.type === filter) && (marker.type != "EVENT")){
				marker.visible = false; 
			}else{
				marker.visible = true; 
			}
		}
		return result;
	}else{
		return subscribers;
	}
  };
});
